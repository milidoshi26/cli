const exec = require('child_process').exec;
const core = require('@actions/core');

if (process.platform === "win32") {
    const winInstallScript = exec('validateDotnetVersionWindows.bat', function(err, stdout, stderr) {
        if (err) {
            core.error('Error:');
        }
        console.log(stdout);
    });
    winInstallScript.stdout.on('data', (data) => {
        console.log(data);
    });
} else if (process.platform === "darwin") {
    core.error('Error: CredScan is not supported on MacOS. Please use Linux or Windows');
} else {
    const installScript = exec('./validateDotnetVersion.sh', function(err, stdout, stderr) {
        if (err) {
            core.error('Error:');
        }
        console.log(stdout);
    });
    installScript.stdout.on('data', (data) => {
        console.log(data);
    });
}
